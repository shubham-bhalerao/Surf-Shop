<% layout('layouts/boilerplate') -%>
<h1><%=user.username%>'s Profile</h1>
<p>Recent Posts:</p>
<% posts.forEach(function(post){ %>
<div>
   <a href="/posts/<%=post._id%>"><%=post.title%></a>
</div>
<% })%>

<p>Update Info</p>

<form action="/profile?_method=PUT" method="POST">
   <div>
      <label for="username">Username</label>
      <input type="text" id="username" value="<%=currentUser.username%>" name="username" placeholder="username"
         autofocus required>
   </div>
   <div>
      <label for="current-password">Current Password (required to update profile):</label>
      <input type="password" id="current-password" name="currentPassword" placeholder="current password" required>
   </div>
   <div>
      <label for="new-password">New Password:</label>
      <input type="password" id="new-password" name="newPassword" placeholder="new password">
   </div>
   <div>
      <label for="password-confirmation">New Password Confirmation:</label>
      <input type="password" id="password-confirmation" name="passwordConfirmation" placeholder="password confirmation">
   </div>
   <div id="validation-message"></div>
   <div>
      <label for="email">Email:</label>
      <input type="email" id="email" name="email" placeholder="email" value="<%= currentUser.email %>" required>
   </div>
   <div>
      <label for="image">Image:</label>
      <input type="file" id="image" name="image">
   </div>
   <input type="submit" id="submitBtn" value="Update Profile">
</form>

<script src="/js/profile.js"></script>